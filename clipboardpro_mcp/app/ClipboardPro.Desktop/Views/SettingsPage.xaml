<Page
    x:Class="ClipboardPro.Desktop.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource BackgroundPrimary}">

    <ScrollViewer>
        <Grid Padding="32" MaxWidth="800">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Page Title -->
            <TextBlock Grid.Row="0" Text="Settings" Style="{StaticResource PageTitleStyle}"/>

            <!-- Settings Sections -->
            <StackPanel Grid.Row="1" Spacing="24">

                <!-- General Settings -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock Text="General" Style="{StaticResource SectionTitleStyle}"/>

                        <ToggleSwitch x:Name="StartWithWindowsToggle"
                                     Header="Start with Windows"
                                     OnContent="Enabled"
                                     OffContent="Disabled"/>

                        <ToggleSwitch x:Name="MinimizeToTrayToggle"
                                     Header="Minimize to system tray"
                                     OnContent="Enabled"
                                     OffContent="Disabled"
                                     IsOn="True"/>

                        <ToggleSwitch x:Name="ClipboardMonitoringToggle"
                                     Header="Clipboard monitoring"
                                     OnContent="Active"
                                     OffContent="Paused"
                                     IsOn="True"/>
                    </StackPanel>
                </Border>

                <!-- Sync Settings -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Synchronization" Style="{StaticResource SectionTitleStyle}"/>

                        <ToggleSwitch x:Name="SyncEnabledToggle"
                                     Header="Enable multi-device sync"
                                     OnContent="Enabled"
                                     OffContent="Disabled"
                                     Toggled="SyncToggle_Changed"/>

                        <StackPanel x:Name="SyncSettings" Spacing="12" Visibility="Collapsed">
                            <TextBox x:Name="McpServerUrlTextBox"
                                    Header="MCP Server URL"
                                    PlaceholderText="http://localhost:3002"
                                    Text="http://localhost:3002">
                                <TextBox.Resources>
                                    <SolidColorBrush x:Key="TextControlBackground" Color="#1E293B"/>
                                    <SolidColorBrush x:Key="TextControlForeground" Color="#F1F5F9"/>
                                </TextBox.Resources>
                            </TextBox>

                            <TextBox x:Name="ApiKeyTextBox"
                                    Header="API Key"
                                    PlaceholderText="Enter your API key"
                                    Password="True">
                                <TextBox.Resources>
                                    <SolidColorBrush x:Key="TextControlBackground" Color="#1E293B"/>
                                    <SolidColorBrush x:Key="TextControlForeground" Color="#F1F5F9"/>
                                </TextBox.Resources>
                            </TextBox>

                            <TextBox x:Name="DeviceIdTextBox"
                                    Header="Device ID"
                                    PlaceholderText="Unique device identifier"
                                    IsReadOnly="True">
                                <TextBox.Resources>
                                    <SolidColorBrush x:Key="TextControlBackground" Color="#1E293B"/>
                                    <SolidColorBrush x:Key="TextControlForeground" Color="#F1F5F9"/>
                                </TextBox.Resources>
                            </TextBox>

                            <Button Content="Test Connection" Click="TestConnection_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- AI Settings -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock Text="AI Configuration" Style="{StaticResource SectionTitleStyle}"/>

                        <ComboBox x:Name="AiProviderComboBox"
                                 Header="AI Provider"
                                 PlaceholderText="Select provider"
                                 Width="300"
                                 HorizontalAlignment="Left">
                            <ComboBoxItem Content="Claude CLI" Tag="claude" IsSelected="True"/>
                            <ComboBoxItem Content="Gemini CLI" Tag="gemini"/>
                        </ComboBox>

                        <ToggleSwitch x:Name="AiAutoProcessToggle"
                                     Header="Auto-process images with OCR"
                                     OnContent="Enabled"
                                     OffContent="Disabled"/>
                    </StackPanel>
                </Border>

                <!-- History Settings -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock Text="History" Style="{StaticResource SectionTitleStyle}"/>

                        <Slider x:Name="HistoryLimitSlider"
                               Header="Maximum history entries"
                               Minimum="100"
                               Maximum="10000"
                               Value="1000"
                               StepFrequency="100"
                               Width="300"
                               HorizontalAlignment="Left"/>

                        <TextBlock x:Name="HistoryLimitText"
                                  Text="Limit: 1000 entries"
                                  Foreground="{StaticResource TextSecondary}"
                                  FontSize="12"/>

                        <ComboBox x:Name="AutoDeleteComboBox"
                                 Header="Auto-delete entries older than"
                                 PlaceholderText="Never"
                                 Width="300"
                                 HorizontalAlignment="Left">
                            <ComboBoxItem Content="Never" Tag="0"/>
                            <ComboBoxItem Content="7 days" Tag="7"/>
                            <ComboBoxItem Content="30 days" Tag="30"/>
                            <ComboBoxItem Content="90 days" Tag="90"/>
                        </ComboBox>

                        <Button Content="Clear All History" Click="ClearAllHistory_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{StaticResource DangerBrush}"
                                           CornerRadius="4"
                                           Padding="16,8">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <FontIcon Glyph="&#xE74D;" FontSize="16" Foreground="White"/>
                                            <TextBlock Text="{TemplateBinding Content}" Foreground="White"/>
                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- About -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="12">
                        <TextBlock Text="About" Style="{StaticResource SectionTitleStyle}"/>

                        <StackPanel Spacing="8">
                            <TextBlock Foreground="{StaticResource TextPrimary}" FontWeight="SemiBold">
                                ClipboardPro MCP
                            </TextBlock>
                            <TextBlock Text="Version 1.0.0" Foreground="{StaticResource TextSecondary}" FontSize="12"/>
                            <TextBlock Text="Skynet Clipboard Intelligence" Foreground="{StaticResource TextSecondary}" FontSize="12"/>
                            <TextBlock Text="Â© 2025 Skynet Depot" Foreground="{StaticResource TextTertiary}" FontSize="11"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,8,0,0">
                            <HyperlinkButton Content="Documentation" NavigateUri="https://github.com/skynet"/>
                            <HyperlinkButton Content="Report Issue" NavigateUri="https://github.com/skynet/issues"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Save Button -->
                <Button Content="Save Settings" Click="SaveSettings_Click" HorizontalAlignment="Right">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{StaticResource SuccessBrush}"
                                   CornerRadius="4"
                                   Padding="24,12">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon Glyph="&#xE74E;" FontSize="16" Foreground="White"/>
                                    <TextBlock Text="{TemplateBinding Content}" Foreground="White" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>
